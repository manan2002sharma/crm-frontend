{"ast":null,"code":"import { fetchTicketLoading, fetchTicketSuccess, fetchTicketFail, searchTickets, fetchSingleTicketLoading, fetchSingleTicketSuccess, fetchSingleTicketFail, replyTicketLoading, replyTicketSuccess, replyTicketFail, closeTicketLoading, closeTicketSuccess, closeTicketFail } from \"./ticketsSlice\";\nimport { getAllTickets, getSingleTicket, updateReplyTicket, updateTicketStatusClosed } from \"../../api/ticketApi\";\nexport const fetchAllTickets = () => async dispatch => {\n  dispatch(fetchTicketLoading());\n\n  try {\n    const result = await getAllTickets();\n    result.data.result.length && dispatch(fetchTicketSuccess(result.data.result));\n  } catch (error) {\n    dispatch(fetchTicketFail(error.message));\n  }\n};\nexport const filterSerachTicket = str => dispatch => {\n  dispatch(searchTickets(str));\n}; //Actions for single ticket only\n\nexport const fetchSingleTicket = _id => async dispatch => {\n  dispatch(fetchSingleTicketLoading());\n\n  try {\n    const result = await getSingleTicket(_id);\n    dispatch(fetchSingleTicketSuccess(result.data.result.length && result.data.result[0]));\n  } catch (error) {\n    dispatch(fetchSingleTicketFail(error.message));\n  }\n}; //Actions for replying on single ticket\n\nexport const replyOnTicket = (_id, msgObj) => async dispatch => {\n  dispatch(replyTicketLoading());\n\n  try {\n    const result = await updateReplyTicket(_id, msgObj);\n    console.log(result);\n\n    if (result.status === \"error\") {\n      return dispatch(replyTicketFail(result.message));\n    }\n\n    dispatch(fetchSingleTicket(_id));\n    dispatch(replyTicketSuccess(result.message));\n  } catch (error) {\n    console.log(error.message);\n    dispatch(replyTicketFail(error.message));\n  }\n}; //Actions for closing ticket\n\nexport const closeTicket = _id => async dispatch => {\n  dispatch(closeTicketLoading());\n\n  try {\n    const result = await updateTicketStatusClosed(_id);\n\n    if (result.status === \"error\") {\n      return dispatch(closeTicketFail(result.message));\n    }\n\n    dispatch(fetchSingleTicket(_id));\n    dispatch(closeTicketSuccess(\"Status Updated successfully\"));\n  } catch (error) {\n    console.log(error.message);\n    dispatch(closeTicketFail(error.message));\n  }\n};","map":{"version":3,"sources":["M:/tss-project/crm-frontend/src/pages/ticket-list/ticketsAction.js"],"names":["fetchTicketLoading","fetchTicketSuccess","fetchTicketFail","searchTickets","fetchSingleTicketLoading","fetchSingleTicketSuccess","fetchSingleTicketFail","replyTicketLoading","replyTicketSuccess","replyTicketFail","closeTicketLoading","closeTicketSuccess","closeTicketFail","getAllTickets","getSingleTicket","updateReplyTicket","updateTicketStatusClosed","fetchAllTickets","dispatch","result","data","length","error","message","filterSerachTicket","str","fetchSingleTicket","_id","replyOnTicket","msgObj","console","log","status","closeTicket"],"mappings":"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","sourcesContent":["import {\n  fetchTicketLoading,\n  fetchTicketSuccess,\n  fetchTicketFail,\n  searchTickets,\n  fetchSingleTicketLoading,\n  fetchSingleTicketSuccess,\n  fetchSingleTicketFail,\n  replyTicketLoading,\n  replyTicketSuccess,\n  replyTicketFail,\n  closeTicketLoading,\n  closeTicketSuccess,\n  closeTicketFail,\n} from \"./ticketsSlice\";\n\nimport {\n  getAllTickets,\n  getSingleTicket,\n  updateReplyTicket,\n  updateTicketStatusClosed,\n} from \"../../api/ticketApi\";\n\nexport const fetchAllTickets = () => async (dispatch) => {\n  dispatch(fetchTicketLoading());\n  try {\n    const result = await getAllTickets();\n    result.data.result.length &&\n      dispatch(fetchTicketSuccess(result.data.result));\n  } catch (error) {\n    dispatch(fetchTicketFail(error.message));\n  }\n};\n\nexport const filterSerachTicket = (str) => (dispatch) => {\n  dispatch(searchTickets(str));\n};\n\n//Actions for single ticket only\nexport const fetchSingleTicket = (_id) => async (dispatch) => {\n  dispatch(fetchSingleTicketLoading());\n  try {\n    const result = await getSingleTicket(_id);\n    dispatch(\n      fetchSingleTicketSuccess(\n        result.data.result.length && result.data.result[0]\n      )\n    );\n  } catch (error) {\n    dispatch(fetchSingleTicketFail(error.message));\n  }\n};\n\n//Actions for replying on single ticket\nexport const replyOnTicket = (_id, msgObj) => async (dispatch) => {\n  dispatch(replyTicketLoading());\n  try {\n    const result = await updateReplyTicket(_id, msgObj);\n    console.log(result);\n    if (result.status === \"error\") {\n      return dispatch(replyTicketFail(result.message));\n    }\n\n    dispatch(fetchSingleTicket(_id));\n\n    dispatch(replyTicketSuccess(result.message));\n  } catch (error) {\n    console.log(error.message);\n    dispatch(replyTicketFail(error.message));\n  }\n};\n//Actions for closing ticket\nexport const closeTicket = (_id) => async (dispatch) => {\n  dispatch(closeTicketLoading());\n  try {\n    const result = await updateTicketStatusClosed(_id);\n    if (result.status === \"error\") {\n      return dispatch(closeTicketFail(result.message));\n    }\n\n    dispatch(fetchSingleTicket(_id));\n\n    dispatch(closeTicketSuccess(\"Status Updated successfully\"));\n  } catch (error) {\n    console.log(error.message);\n    dispatch(closeTicketFail(error.message));\n  }\n};\n"]},"metadata":{},"sourceType":"module"}